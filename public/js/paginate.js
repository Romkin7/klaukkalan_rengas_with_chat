"use strict";$(document).ready(function(){if("/renkaat"===window.location.pathname||"/admin/orders"===window.location.pathname){var t=function(t,e){return window.location.pathname,'\n\t\t\t\t\t<a class="item" id="first" url="/renkaat?page='+e.first+"&category="+t.category+"&search="+t.searchTerm+"&manufacturer="+t.manufacturer+"&car_type="+t.car_type+"&size="+t.size+'">'+t.pages.first+'</a>\n\t\t\t\t\t<a class="item" id="prev" url="/renkaat?page='+e.prev+"&category="+t.category+"&search="+t.searchTerm+"&manufacturer="+t.manufacturer+"&car_type="+t.car_type+"&size="+t.size+'"><i class="fa fa-chevron-left" aria-hidden="true"></i></a>\n\t\t\t\t\t'+t.pages.visiblePages.map(function(a){return'\n\t\t\t\t\t\t<a class="item '+(a===e.current?"active":"notActive")+'" url="/renkaat?page='+a+"&category="+t.category+"&search="+t.searchTerm+"&manufacturer="+t.manufacturer+"&car_type="+t.car_type+"&size="+t.size+'">'+a+"</a>\n\t\t\t\t\t"}).join("")+'\n\t\t\t\t\t<a class="item" id="next" url="/renkaat?page='+t.pages.next+"&category="+t.category+"&search="+t.searchTerm+"&manufacturer="+t.manufacturer+"&car_type="+t.car_type+"&size="+t.size+'"><i class="fa fa-chevron-right" aria-hidden="true"></i></a>\n\t\t\t\t\t<a class="item" id="last" url="/renkaat?page='+t.pages.last+"&category="+t.category+"&search="+t.searchTerm+"&manufacturer="+t.manufacturer+"&car_type="+t.car_type+"&size="+t.size+'">'+t.pages.last+"</a>\n\t\t\t\t"},e=function(e){$("#title").html(""),$("#title").html(e.title),$("#error").html(""),$("#results").html(""),$("#paginationMenu").html(""),$("#paginationMenu2").html(""),$("#currentPage").html(""),$("#currentPage2").html(""),$("#productsTotal").html(""),$("#productsTotal2").html(""),$("#currentPage").html("Sivu "+e.pages.current+" / "+e.pages.total+" sivusta"),$("#currentPage2").html("Sivu "+e.pages.current+" / "+e.pages.total+" sivusta"),$("#productsTotal").html("Tuotteita yhteensä "+e.items.total+" kpl"),$("#productsTotal2").html("Tuotteita yhteensä "+e.items.total+" kpl"),"/admin/product"===window.location.pathname?($("#latest").attr("url","/admin/product?search="+e.search+"&category="+e.category+"&genre="+e.genre+"&page=1type="+e.type+"&SortByPrice=&SortByTitle=&SortByCreatedAt="+-1+"&Quantity="+e.Quantity),$("#oldest").attr("url","/admin/product?search="+e.search+"&category="+e.category+"&genre="+e.genre+"&page=1type="+e.type+"&SortByPrice=&SortByTitle=&SortByCreatedAt=1&Quantity="+e.Quantity),$("#byTitle1").attr("url","/admin/product?search="+e.search+"&category="+e.category+"&genre="+e.genre+"&page=1type="+e.type+"&SortByPrice=&SortByTitle=1&SortByCreatedAt=&Quantity="+e.Quantity),$("#byTitle-1").attr("url","/admin/product?search="+e.search+"&category="+e.category+"&genre="+e.genre+"&page=1type="+e.type+"&SortByPrice=&SortByTitle="+-1+"&SortByCreatedAt=&Quantity="+e.Quantity),$("#byPrice-1").attr("url","/admin/product?search="+e.search+"&category="+e.category+"&genre="+e.genre+"&page=1type="+e.type+"&SortByPrice="+-1+"&SortByTitle=&SortByCreatedAt=&Quantity="+e.Quantity),$("#byPrice1").attr("url","/admin/product?search="+e.search+"&category="+e.category+"&genre="+e.genre+"&page=1type="+e.type+"&SortByPrice=1&SortByTitle=&SortByCreatedAt=&Quantity="+e.Quantity),$("#zeroProducts").attr("url","/admin/product?search="+e.search+"&category="+e.category+"&genre="+e.genre+"&page=1type="+e.type+"&SortByPrice=1&SortByTitle=&SortByCreatedAt=&Quantity=0")):($("#latest").attr("url","/lp:t?search="+e.search+"&category="+e.category+"&genre="+e.genre+"&page=1type="+e.type+"&SortByPrice=&SortByTitle=&SortByCreatedAt="+-1),$("#oldest").attr("url","/lp:t?search="+e.search+"&category="+e.category+"&genre="+e.genre+"&page=1type="+e.type+"&SortByPrice=&SortByTitle=&SortByCreatedAt=1"),$("#byTitle1").attr("url","/lp:t?search="+e.search+"&category="+e.category+"&genre="+e.genre+"&page=1type="+e.type+"&SortByPrice=&SortByTitle=1&SortByCreatedAt="),$("#byTitle-1").attr("url","/lp:t?search="+e.search+"&category="+e.category+"&genre="+e.genre+"&page=1type="+e.type+"&SortByPrice=&SortByTitle="+-1+"&SortByCreatedAt="),$("#byPrice-1").attr("url","/lp:t?search="+e.search+"&category="+e.category+"&genre="+e.genre+"&page=1type="+e.type+"&SortByPrice="+-1+"&SortByTitle=&SortByCreatedAt="),$("#byPrice1").attr("url","/lp:t?search="+e.search+"&category="+e.category+"&genre="+e.genre+"&page=1type="+e.type+"&SortByPrice=1&SortByTitle=&SortByCreatedAt=")),e.tyres.forEach(function(t){$("#results").hide().append(function(t,e){return'\n\t\t\t\t<div class="ui four wide column">\n\t\t\t\t\t<a href="/renkaat/'+t._id+'" class="tyrecard">\n\t\t\t\t\t\t<div class="ui orange segment">\n\t\t\t\t\t\t\t<div class="header-section">\n\t\t\t\t\t\t\t\t<h4 class="black">'+t.manufacturer+'</h4>\n\t\t\t\t\t\t\t\t<h4 class="smaller black">'+t.model+'</h4>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<img class="ui medium image" alt="'+t.manufacturer+", "+t.model+'" src="'+t.cover+'">\n\t\t\t\t\t\t\t<p class="no_margin">Alkaen: </p>\n\t\t\t\t\t\t\t<p>koko: '+(e?function(t,e){return t.size_and_price.filter(function(t){return t.size===e&&t.size})[0].size}(t,e):function(t){var e=t.size_and_price.map(function(t){return t.unit_price}),a=Math.min.apply(null,e);return t.size_and_price.filter(function(t){if(t.unit_price===a)return t.size})[0].size}(t))+'</p>\n\t\t\t\t\t\t\t<p class="ui orange big horizontal label">'+(e?function(t,e){return t.size_and_price.filter(function(t){return t.size===e&&t.unit_price})[0].unit_price}(t,e):function(t){var e=t.size_and_price.map(function(t){return t.unit_price});return Math.min.apply(null,e)}(t))+",00 €/Sarja</p>\n\t\t\t\t\t\t\t<p><em>Hinta sisältää työt</em></p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t"}(t,e.size)).fadeIn(600)}),$("#paginationMenu").html(t(e,e.pages)),$("#paginationMenu2").html(t(e,e.pages)),$(".slide-menu").slideUp(500),$("html, body").animate({scrollTop:0},"medium")},a=function(t){$(".slide-menu").slideUp(500),$("#error").html(""),$("#error").html('\n\t\t\t<div class="ui orange message">\n  \t\t\t\t'+t.message+"\n\t\t\t</div>\n\t\t")},r=function(t,r,n){t.preventDefault();var i=$("#statusInput").val();""!==r&&"/admin/orders"===window.location.pathname?$.get("/admin/orders?search="+r+"&page=1&status="+i,function(t,i,s){204===s.status||302===s.status?a({message:"Valitettavasti hakusanalla '"+r+"' ei löytynyt yhtään hakutulosta!"}):s.status<400?e(t):a({message:"Valitettavasti hakusanalla '"+r+"' ei löytynyt yhtään hakutulosta!"}),n.val("")}):$.get("/renkaat?search="+r+"&page=1",function(t,i,s){204===s.status||302===s.status?a({message:"Valitettavasti hakusanalla '"+r+"' ei löytynyt yhtään hakutulosta!"}):s.status<400?e(t):a({message:"Valitettavasti hakusanalla '"+r+"' ei löytynyt yhtään hakutulosta!"}),n.val("")})},n=$("body");$(document).on({ajaxStart:function(){n.addClass("loading")},ajaxStop:function(){$("#loadingDiv").empty(),n.removeClass("loading")}}),$(".searchBox").on("change",function(t){var e=$(this),a=$(this).val();r(t,a,e)}),$(".searchBox").on("keypress",function(t){if(13==t.which){var e=$(this),a=$(this).val();r(t,a,e)}}),$("#paginationMenu").on("click",".item",function(t){t.stopPropagation(),t.preventDefault();var r=$(this).attr("url");$.get(r,function(t,r,n){n.status<400?e(t):a(t)})}),$(".sortMenu").on("click",".sortMenuItem",function(t){t.stopPropagation(),t.preventDefault();var r=$(this).attr("url");$.get(r,function(t,r,n){204===n.status||302===n.status?a({message:"Valitettavasti ei löytynyt yhtään hakutulosta!"}):n.status<400&&204!==n.status?e(t):a(t)})}),$("#paginationMenu2").on("click",".item",function(t){t.stopPropagation(),t.preventDefault();var r=$(this).attr("url");$.get(r,function(t,r,n){n.status<400?e(t):a(t)})}),$("#toggle").click(function(){$("#vertical-menu").sidebar("toggle"),$("html, body").animate({scrollTop:0},"medium")}),$(".ui.dropdown").dropdown(),$(".menu .item").tab(),$("#searchBarBtn").on("click",function(t){t.preventDefault(),"0px"==$("#searchInput").css("width")?($("#searchInput").css("width","320px"),$(this).addClass("activated")):($(this).removeClass("activated"),$("#searchInput").css("width","0px"))})}});