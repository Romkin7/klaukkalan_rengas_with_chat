$(document).ready(function(){var t,e=window.URL||widndow.webkitURL,i=($("#imgPreview"),$("#imgBtns")),n=$("#imageInput"),s=($("#submitBtn"),$("#productCreateForm")),o=$("#successMsg");function r(){$("#errorMsg").html(""),$("#imgPreview").cropper("destroy"),$("#imgPreview").removeAttr("src"),$("#imageInput").show(),$("#submitBtn").show(),n.prop("disabled",!1),i.hide()}s.on("change","#cover",function(t){if(o=3e6,(!(this.files[0].size>o)||(r(),$("#errorMsg").append('\n\t\t\t\t<div class="ui orange message">\n  \t\t\t\t\t<i class="close icon"></i>\n  \t\t\t\t\t<div class="header">\n   \t \t\t\t\t\tVaroitus!\n  \t\t\t\t\t</div>\n  \t\t\t\t\t<p>Maksimi sallittu tiedostokoko on 3MB.</p>\t\t\t\t\t\n\t\t\t\t</div>\n\t\t\t'),0))&&(n=n="cover","image/jpg"===(s=(s=document.getElementById(n).files[0].type).toString())||"image/png"===s||"image/jpeg"===s||"image/bmp"===s||(r(),$("#errorMsg").append("\n\t\t\t\t<div class=\"ui orange message\">\n  \t\t\t\t\t<i class=\"close icon\"></i>\n  \t\t\t\t\t<div class=\"header\">\n   \t \t\t\t\t\tVaroitus!\n  \t\t\t\t\t</div>\n  \t\t\t\t\t<p>Vain <strong>'.jpg', '.jpeg', '.png' tai '.bmp'</strong> kuvatiedostot ovat sallittuja.</p>\t\t\t\t\t\n\t\t\t\t</div>\n\t\t\t"),0))){$("#errorMsg").html("");var i=new FileReader;i.onload=function(t){document.getElementById("imgPreview").src=t.target.result,$("#imgPreview").on("load",function(){var t,e,i;$("#errorMsg").html(""),t=1,e=400,i=400,$("#imgPreview").cropper({aspectRatio:t,viewMode:1,responsive:!0,background:!0,modal:!1,zoomable:!0,zoomOnTouch:!0,cropBoxResizable:!0,minCropBoxWidth:e,minCropBoxHeight:i,ready:function(){}}),$("#imageInput").hide(),$("#submitBtn").hide(),$("#imgBtns").show()}).on("error",function(){document.getElementById("imgPreview").src="",r(),$("#errorMsg").html('\n\t\t\t\t\t\t<div class="ui negative message">\n  \t\t\t\t\t\t\t<i class="close icon"></i>\n  \t\t\t\t\t\t\t<div class="header">\n   \t \t\t\t\t\t\t\tUps, Epäonnitui!\n  \t\t\t\t\t\t\t</div>\n  \t\t\t\t\t\t\t<p>Kuvan latauksessa ilmeni virhe, yritä hetken kuluttua uudelleen.</p>\t\t\t\t\t\n\t\t\t\t\t\t</div>\n\t\t\t\t\t')})},i.readAsDataURL(this.files[0])}var n,s,o;!function(t,i,n){var s,o;(s=t.files[0])&&((o=new Image).onload=function(){(this.width<i||this.height<n)&&(r(),$("#errorMsg").append(`\n          \t\t\t\t<div class="ui orange message">\n  \t\t\t\t\t\t\t<i class="close icon"></i>\n  \t\t\t\t\t\t\t<div class="header">\n   \t \t\t\t\t\t\t\tVaroitus!\n  \t\t\t\t\t\t\t</div>\n  \t\t\t\t\t\t\t<p>Kuvan koon on oltava vähintään, <strong>${i} * ${n}</strong> pikseliä leveä ja korkea.</p>\t\t\t\t\t\n\t\t\t\t\t\t</div>\n\t\t\t\t\t`))},o.src=e.createObjectURL(s))}(this,290,290)}),$("#submitImage").on("click",function(e){e.preventDefault(),t=$("#imgPreview").cropper("getData",!0),$.post("/admin/products/cropperdata",t,function(t){"success"===t&&($("#imgPreview").cropper("destroy"),$("#imgPreview").removeAttr("src"),$("#imgBtns").hide(),$("#submitBtn").show(),$("#imageInput").show(),$("#imageInput").prop("disabled",!0),o.html('\n\t\t\t\t\t<div class="ui positive message">\n  \t\t\t\t\t\t<i class="close icon"></i>\n  \t\t\t\t\t\t<div class="header">\n    \t\t\t\t\t\tOnnistui!\n  \t\t\t\t\t\t</div>\n  \t\t\t\t\t\t<p>Kuva on onnistuneesti lisätty.</p>\n\t\t\t\t\t</div>\n\t\t\t\t'))})}),$("#resetImage").on("click",function(t){t.preventDefault(),r()}),s.on("submit",function(){$("body").scrollTop(1e3)})});