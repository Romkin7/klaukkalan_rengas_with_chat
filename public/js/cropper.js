document.addEventListener("DOMContentLoaded",function(){window.URL||widndow.webkitURL;if("/portfolio/new"===window.location.pathname){function t(t,e){return`\n\t\t\t\t<div class="ui warning message">\n\t\t\t\t\t<i class="close icon"></i>\n\t\t\t\t\t<div class="header">\n\t\t\t\t\t\t${t}!\n\t\t\t\t\t</div>\n\t\t\t\t\t${e}\n\t\t\t\t</div>\n\t\t\t`}for(var e=document.querySelector("#imageInput"),n=document.querySelector("#imageView"),i=document.getElementById("custom-file-upload"),o=document.querySelector("#imagePreviewContainer"),r=document.querySelector("#messages"),a=document.querySelector("#aspectRatioButtons"),c=document.querySelectorAll(".ratioBtn"),d=1,s=400,u=400,l=0;l<c.length;l++)c[l].addEventListener("click",function(t){t.preventDefault(),d=this.getAttribute("ratio"),s=Number(this.getAttribute("width")),u=Number(this.getAttribute("height")),g(d,s,u)});function g(t,e,n){$("#imageView").cropper("destroy").cropper({aspectRatio:t,viewMode:1,responsive:!0,background:!0,modal:!1,zoomable:!0,zoomOnTouch:!0,cropBoxResizable:!0,minCropBoxWidth:e,minCropBoxHeight:n,ready:function(){}})}function m(){r.innerHTML="",e.value=""}e.addEventListener("change",function(e){if(f=3e6,(!(this.files[0].size>f)||(m(),r.innerHTML=`${t("Внимание","Максимальный размер фотографии является 3МБ.")}`,0))&&(l=l="imageInput","image/jpg"===(p=(p=document.getElementById(l).files[0].type).toString())||"image/png"===p||"image/jpeg"===p||"image/bmp"===p||(m(),r.innerHTML=`${t("Внимание","Формат фотографии не разрешен. Фотографии могут быть формата jpg, jpeg, png или gif.")}`,0))){r.innerHTML="";var c=new FileReader;console.log(c),c.onload=function(t){n.src=t.target.result,n.onload=function(){i.classList.toggle("hidden"),o.classList.toggle("hidden"),a.classList.toggle("hidden"),g(d,s,u)}},c.readAsDataURL(this.files[0])}var l,p,f})}});